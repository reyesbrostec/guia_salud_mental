    <div class="w-full flex justify-end p-4">
        <a href="src/inclusion.html" class="inline-flex items-center px-4 py-2 bg-[#4A7C59] text-white rounded-md shadow hover:bg-[#3A6B4A] transition-colors">
            Volver al inicio
        </a>
    </div>
    <div class="w-full flex justify-end p-4">
        <a href="src/inclusion.html" class="inline-flex items-center px-4 py-2 bg-[#4A7C59] text-white rounded-md shadow hover:bg-[#3A6B4A] transition-colors">
            Volver al inicio
        </a>
    </div>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mente Prisma: Tu espacio de claridad</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .kanban-container::-webkit-scrollbar {
            height: 8px;
        }
        .kanban-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        .kanban-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .kanban-container::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        .prose {
            text-align: justify;
        }
        .prose img,
        .prose video,
        .prose audio {
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 1.5em;
            margin-bottom: 1.5em;
            max-width: 100%;
        }
        /* Accesibilidad: alto contraste */
        body.high-contrast {
            background: #000 !important;
            color: #fff !important;
        }
        body.high-contrast .bg-white,
        body.high-contrast .bg-slate-50,
        body.high-contrast .bg-slate-100,
        body.high-contrast .bg-slate-200,
        body.high-contrast .bg-blue-100,
        body.high-contrast .bg-amber-100,
        body.high-contrast .bg-emerald-100 {
            background: #111 !important;
        }
        body.high-contrast .text-slate-800,
        body.high-contrast .text-slate-900,
        body.high-contrast .text-slate-700,
        body.high-contrast .text-slate-500,
        body.high-contrast .text-blue-600,
        body.high-contrast .text-amber-600,
        body.high-contrast .text-emerald-600 {
            color: #fff !important;
        }
        /* Accesibilidad: fuente grande */
        body.large-font, body.large-font .prose {
            font-size: 1.25em !important;
        }
        /* Accesibilidad: resaltar enlaces */
        body.highlight-links a {
            outline: 3px solid #f59e42;
            background: #fffbe6;
            color: #b45309 !important;
        }
        /* Accesibilidad: justificar texto (ya aplicado en .prose) */
        /* Botón flotante de accesibilidad */
        #accessibility-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
            background: #0d9488;
            color: #fff;
            border-radius: 50%;
            width: 3.5rem;
            height: 3.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            cursor: pointer;
        }
        #accessibility-panel {
            position: fixed;
            bottom: 6.5rem;
            right: 2rem;
            z-index: 101;
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 2px 16px rgba(0,0,0,0.18);
            padding: 1.25rem 1.5rem;
            min-width: 220px;
            display: none;
        }
        #accessibility-panel.active {
            display: block;
        }
        #accessibility-panel label {
            display: flex;
            align-items: center;
            gap: 0.5em;
            margin-bottom: 0.75em;
            font-size: 1rem;
            cursor: pointer;
        }
        body.dark-mode {
            background: #18181b !important;
            color: #f1f5f9 !important;
        }
        body.dark-mode .bg-white,
        body.dark-mode .bg-slate-50,
        body.dark-mode .bg-slate-100,
        body.dark-mode .bg-slate-200,
        body.dark-mode .bg-blue-100,
        body.dark-mode .bg-amber-100,
        body.dark-mode .bg-emerald-100 {
            background: #27272a !important;
        }
        body.dark-mode .text-slate-800,
        body.dark-mode .text-slate-900,
        body.dark-mode .text-slate-700,
        body.dark-mode .text-slate-500,
        body.dark-mode .text-blue-600,
        body.dark-mode .text-amber-600,
        body.dark-mode .text-emerald-600 {
            color: #f1f5f9 !important;
        }
        /* Alto contraste para el panel de accesibilidad */
        body.high-contrast .accessibility-panel {
            background: #111 !important;
            color: #fff !important;
            border: 2px solid #fff;
        }
        body.high-contrast .accessibility-panel input[type="checkbox"]:not(:disabled) + label,
        body.high-contrast .accessibility-panel label {
            color: #fff !important;
        }
        body.high-contrast .accessibility-panel input[type="checkbox"] {
            accent-color: #fff;
            border: 2px solid #fff;
        }
        body.high-contrast .accessibility-panel select {
            background: #222;
            color: #fff;
            border: 1px solid #fff;
        }
        body.high-contrast .accessibility-panel hr {
            border-color: #fff;
        }

        /* Modo oscuro para el panel de accesibilidad */
        body.dark-mode .accessibility-panel {
            background: #27272a !important;
            color: #f1f5f9 !important;
            border: 2px solid #f1f5f9;
        }
        body.dark-mode .accessibility-panel input[type="checkbox"]:not(:disabled) + label,
        body.dark-mode .accessibility-panel label {
            color: #f1f5f9 !important;
        }
        body.dark-mode .accessibility-panel input[type="checkbox"] {
            accent-color: #f1f5f9;
            border: 2px solid #f1f5f9;
        }
        body.dark-mode .accessibility-panel select {
            background: #18181b;
            color: #f1f5f9;
            border: 1px solid #f1f5f9;
        }
        body.dark-mode .accessibility-panel hr {
            border-color: #f1f5f9;
        }
        body.lineheight {
            line-height: 2 !important;
        }
        body.big-cursor, body.big-cursor * {
            cursor: url('https://cdn.jsdelivr.net/gh/ionic-team/ionicons@5.5.2/src/svg/accessibility-outline.svg'), auto !important;
        }
        body.underline-links a {
            text-decoration: underline !important;
        }
        body.dyslexia-font, body.dyslexia-font .prose {
            font-family: 'OpenDyslexic', 'Arial', sans-serif !important;
        }
        @font-face {
            font-family: 'OpenDyslexic';
            src: url('https://cdn.jsdelivr.net/npm/open-dyslexic-fonts@1.0.0/otf/OpenDyslexic-Regular.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-200">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold text-teal-600">Mente Prisma: Tu espacio de claridad</a>
            <a href="inclusion.html" class="bg-teal-600 hover:bg-teal-700 text-white font-semibold px-6 py-3 rounded-lg shadow-md transition-colors">
                Iris Inclusión y Estrategias de Inclusión
            </a>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <!-- Board Title -->
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">Tu Camino hacia el Bienestar</h1>
            <p class="text-slate-500 mt-2 text-lg">Explora estos recursos a tu propio ritmo. Empieza por donde más lo necesites.</p>
        </div>

        <!-- Kanban Board (rellenado dinámicamente por JS) -->
        <div id="kanban-board" class="kanban-container flex space-x-6 overflow-x-auto pb-4"></div>
    </main>

    <!-- Modal para artículo completo -->
    <div id="article-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-xl shadow-lg max-w-2xl w-full p-8 relative overflow-y-auto max-h-[90vh]">
        <button class="absolute top-4 right-4 text-gray-400 hover:text-red-500 text-2xl font-bold modal-close-btn">&times;</button>
        <div id="modal-content"></div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white mt-8 border-t border-slate-200">
        <div class="container mx-auto px-6 py-8 text-center text-slate-500">
            <p>&copy; 2024 BienestarMental. Todos los derechos reservados.</p>
            <p class="text-sm mt-1">Este sitio web ofrece información y no sustituye el consejo médico profesional.</p>
        </div>
    </footer>

    <!-- Botón de accesibilidad flotante -->
    <button id="accessibility-btn" aria-label="Opciones de accesibilidad" title="Accesibilidad">
        <span aria-hidden="true">&#9881;</span>
    </button>
    <div id="accessibility-panel" role="dialog" aria-modal="true" aria-label="Opciones de accesibilidad">
        <label><input type="checkbox" id="toggle-contrast"> Alto contraste</label>
        <label><input type="checkbox" id="toggle-font"> Fuente grande</label>
        <label><input type="checkbox" id="toggle-justify" checked disabled> Texto justificado</label>
        <label><input type="checkbox" id="toggle-links"> Resaltar enlaces</label>
        <label><input type="checkbox" id="toggle-dark"> Modo oscuro</label>
        <label><input type="checkbox" id="toggle-lineheight"> Espaciado de líneas</label>
        <label><input type="checkbox" id="toggle-cursor"> Cursor grande</label>
        <label><input type="checkbox" id="toggle-underline"> Subrayar enlaces</label>
        <label><input type="checkbox" id="toggle-dyslexia"> Fuente dislexia</label>
        <hr class="my-2">
        <label for="disability-type" class="font-semibold">Tipo de discapacidad:</label>
        <select id="disability-type" class="w-full mt-1 p-1 rounded border border-slate-300">
            <option value="">Selecciona una opción</option>
            <option value="visual">Visual</option>
            <option value="auditiva">Auditiva</option>
            <option value="motriz">Motriz</option>
            <option value="cognitiva">Cognitiva</option>
            <option value="dislexia">Dislexia</option>
        </select>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.2/dist/markdown-it.min.js"></script>
    <script>
    // build.js debe insertar aquí la variable blogPosts
    let blogPosts = [];
    // __BLOG_POSTS_DATA__

    // Configura las columnas Kanban
    const columns = [
        { key: 'fundamentos', title: 'Fundamentos', color: 'slate', count: 0 },
        { key: 'guias', title: 'Guías Detalladas', color: 'blue', count: 0 },
        { key: 'bienestar', title: 'Estrategias de Bienestar', color: 'amber', count: 0 },
        { key: 'apoyo', title: 'Recursos y Apoyo', color: 'emerald', count: 0 }
    ];

    // Asigna cada post a una columna según su categoría (ajusta según tus datos reales)
    function getColumnKey(post) {
        const cat = (post.category || '').toLowerCase();
        if (cat.includes('fundamento')) return 'fundamentos';
        if (cat.includes('guía') || cat.includes('guia') || cat.includes('adicciones') || cat.includes('ansiedad') || cat.includes('depresión')) return 'guias';
        if (cat.includes('bienestar') || cat.includes('mindfulness') || cat.includes('sueño') || cat.includes('límites')) return 'bienestar';
        if (cat.includes('apoyo') || cat.includes('terapeuta') || cat.includes('grupo')) return 'apoyo';
        // Fallback
        return 'fundamentos';
    }

    function renderKanban(posts) {
        const board = document.getElementById('kanban-board');
        if (!board) return;
        board.innerHTML = '';
        // Agrupa los posts por columna
        const grouped = {};
        columns.forEach(col => grouped[col.key] = []);
        posts.forEach(post => {
            const key = getColumnKey(post);
            grouped[key] = grouped[key] || [];
            grouped[key].push(post);
        });
        // Renderiza cada columna
        columns.forEach(col => {
            const colPosts = grouped[col.key] || [];
            col.count = colPosts.length;
            const colDiv = document.createElement('div');
            colDiv.className = 'flex-shrink-0 w-80';
            colDiv.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <h2 class="font-semibold text-slate-700">${col.title}</h2>
                    <span class="bg-${col.color}-100 text-${col.color}-600 text-sm font-medium px-2 py-1 rounded-full">${col.count}</span>
                </div>
                <div class="space-y-4"></div>
            `;
            const cardsContainer = colDiv.querySelector('.space-y-4');
            colPosts.forEach(post => {
                // Busca la primera imagen en el markdown
                let imgMatch = post.raw && post.raw.match(/!\[.*?\]\((.*?)\)/);
                let imgTag = imgMatch ? `<img src="${imgMatch[1]}" class="rounded mb-3 aspect-video object-cover" alt="Miniatura">` : '';
                const card = document.createElement('article');
                card.className = 'bg-white p-5 rounded-xl shadow-sm border border-slate-100';
                card.innerHTML = `
                    ${imgTag}
                    <h3 class="font-bold text-slate-800">${post.title}</h3>
                    <p class="text-sm text-slate-500 mt-2">${post.summary || post.description || ''}</p>
                    <a href="#" class="text-${col.color}-600 hover:text-${col.color}-700 text-sm font-semibold mt-4 inline-block ver-mas-link">Ver más &rarr;</a>
                `;
                card.querySelector('.ver-mas-link').onclick = (e) => {
                    e.preventDefault();
                    openModal(post, col.color);
                };
                cardsContainer.appendChild(card);
            });
            board.appendChild(colDiv);
        });
    }

    function openModal(post, color) {
        const modal = document.getElementById('article-modal');
        const content = document.getElementById('modal-content');
        if (!modal || !content) return;
        const md = window.markdownit({ html: true });
        content.innerHTML = `
            <span class="text-xs font-semibold text-${color}-600 mb-1">${post.category || ''}</span>
            <h2 class="font-bold text-2xl mb-2">${post.title}</h2>
            <p class="text-gray-600 mb-4">${post.description || ''}</p>
            <div class="prose max-w-none">${md.render(post.raw || '')}</div>
            <div class="flex flex-wrap gap-2 mt-4">
              ${(post.tags || []).map(tag => `<span class="bg-${color}-100 text-${color}-700 px-2 py-1 rounded text-xs">${tag}</span>`).join('')}
            </div>
        `;
        modal.classList.remove('hidden');
        modal.querySelector('.modal-close-btn').onclick = () => modal.classList.add('hidden');
        modal.onclick = e => { if (e.target === modal) modal.classList.add('hidden'); };
    }

    window.addEventListener('DOMContentLoaded', () => {
        if (typeof blogPosts !== 'undefined') {
            renderKanban(blogPosts);
        }
    });

    // Accesibilidad: panel y acciones
    const accBtn = document.getElementById('accessibility-btn');
    const accPanel = document.getElementById('accessibility-panel');
    accBtn.onclick = (e) => {
        e.stopPropagation();
        accPanel.classList.toggle('active');
    };
    accPanel.onclick = (e) => e.stopPropagation();
    document.addEventListener('click', e => {
        if (accPanel.classList.contains('active')) {
            accPanel.classList.remove('active');
        }
    });
    // Alto contraste
    const chkContrast = document.getElementById('toggle-contrast');
    chkContrast.onchange = e => {
        document.body.classList.toggle('high-contrast', chkContrast.checked);
    };
    // Fuente grande
    const chkFont = document.getElementById('toggle-font');
    chkFont.onchange = e => {
        document.body.classList.toggle('large-font', chkFont.checked);
    };
    // Resaltar enlaces
    const chkLinks = document.getElementById('toggle-links');
    chkLinks.onchange = e => {
        document.body.classList.toggle('highlight-links', chkLinks.checked);
    };
    // Modo oscuro
    const chkDark = document.getElementById('toggle-dark');
    chkDark.onchange = e => {
        document.body.classList.toggle('dark-mode', chkDark.checked);
    };
    // Espaciado de líneas
    const chkLine = document.getElementById('toggle-lineheight');
    chkLine.onchange = e => {
        document.body.classList.toggle('lineheight', chkLine.checked);
    };
    // Cursor grande
    const chkCursor = document.getElementById('toggle-cursor');
    chkCursor.onchange = e => {
        document.body.classList.toggle('big-cursor', chkCursor.checked);
    };
    // Subrayar enlaces
    const chkUnderline = document.getElementById('toggle-underline');
    chkUnderline.onchange = e => {
        document.body.classList.toggle('underline-links', chkUnderline.checked);
    };
    // Fuente dislexia
    const chkDyslexia = document.getElementById('toggle-dyslexia');
    chkDyslexia.onchange = e => {
        document.body.classList.toggle('dyslexia-font', chkDyslexia.checked);
    };
    // Selector de tipo de discapacidad
    const disabilityType = document.getElementById('disability-type');
    disabilityType.onchange = e => {
        // Desactiva todo primero
        [chkContrast, chkFont, chkLinks, chkDark, chkLine, chkCursor, chkUnderline, chkDyslexia].forEach(chk => chk.checked = false);
        document.body.classList.remove('high-contrast','large-font','highlight-links','dark-mode','lineheight','big-cursor','underline-links','dyslexia-font');
        switch (disabilityType.value) {
            case 'visual':
                chkContrast.checked = true;
                chkFont.checked = true;
                chkLinks.checked = true;
                chkUnderline.checked = true;
                chkDark.checked = false;
                chkLine.checked = false;
                chkCursor.checked = false;
                chkDyslexia.checked = false;
                document.body.classList.add('high-contrast','large-font','highlight-links','underline-links');
                break;
            case 'auditiva':
                // No hay adaptación visual directa, pero podrías mostrar un mensaje sobre subtítulos/transcripciones
                break;
            case 'motriz':
                chkCursor.checked = true;
                chkFont.checked = true;
                document.body.classList.add('big-cursor','large-font');
                break;
            case 'cognitiva':
                chkFont.checked = true;
                chkLine.checked = true;
                document.body.classList.add('large-font','lineheight');
                break;
            case 'dislexia':
                chkDyslexia.checked = true;
                chkFont.checked = true;
                document.body.classList.add('dyslexia-font','large-font');
                break;
        }
    };
    </script>
</body>
</html>
